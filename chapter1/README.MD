# **랭체인 살펴보기**  
챗 GPT와 같은 대규모 언어 모델(LLM)은 방대한 텍스트 데이터를 학습해 자연어를 이해하고 생성할 수 있는 인공지능 기술이다.  
그러나 LLM은 학습된 데이터에 기반해 답변을 생성하기 때문에 최신 정보 반영이나 특정 도메인 지식 제공에 한계가 있다. 이를 보완하기 위해 등장한 
기술이 바로 검색 증강 생성(Retrieval-Augmented Generation, RAG)이다.  
  
검색 증강 생성은 LLM의 언어 생성 능력에 검색 기능을 결합하여 모델이 실시간으로 외부 정보를 검색하고 이를 반영해 보다 정확하고 신뢰성 높은 답변을 
생성하는 방식이다. 예를 들어 기업 내부 데이터나 최신 논문 자료를 기반으로 AI 챗봇을 구축할 때 RAG를 활용하면 모델이 최신 데이터를 검색하고 이를 
답변에 반영할 수 있다. 이로 인해 RAG는 AI 애플리케이션의 신뢰성과 활용도를 높이는 핵심 기술로 주목받고 있다.  
  
랭체인은 대규모 언어 모델을 활용한 애플리케이션 개발을 위한 오픈소스 프레임워크다. 챗GPT나 Claude와 같은 LLM을 쉽게 연결하고 활용할 수 있도록 다양한 
구성요소(components)와 타사 통합(integrations)기능을 제공한다. 이러한 구성요소들은 LLM과의 상호작용, 메모리 관리, 체인 실행, 데이터 처리 등 
핵심적인 기능들을 담당하며 개발자는 이를 활용해 복잡한 AI 애플리케이션을 효율적으로 구축할 수 있다.  
  
![img.png](image/img.png)  
  
LLM 애플리케이션의 개발 생태계가 성장하면서 랭체인과 함께 사용할 수 있는 특화된 도구들도 등장했다. 위 그림은 이러한 랭체인 프레임워크의 전체 구조를 
나타낸다. 여기에는 랭체인을 중심으로 복잡한 작업을 시각화하고 API로 전환해주는 랭그래프(LangGraph), 체인의 성능을 모니터링하고 최적화하는 
랭스미스(LangSmith), 그리고 다양한 구성요소와 타사 통합 기능이 포함되어 있다.  
  
랭체인의 가장 큰 특징은 체인이라는 이름이 의미하듯이 각 기능을 유연하게 연결할 수 있다는 점이다. 예를 들어 개발자는 문서 검색, 데이터 처리, 요약, 
번역과 같은 여러 작업을 마치 레고 블록처럼 조립하여 원하는 기능을 구현할 수 있다. 이렇게 특정 작업을 수행할 떄 원하는 기능을 손쉽게 갈아끼우듯이 사용할 
수 있어 프로젝트의 복잡성을 줄이고 개발 효율을 극대화할 수 있다. 이러한 모듈식 설계 덕분에 복잡한 LLM 애플리케이션을 단순하고 관리하기 쉽게 
만들 수 있다.  
  
# **랭체인 개요**  
랭체인은 다양한 오픈소스 패키지와 함께 제공되어 대규모 언어 모델을 활용한 애플리케이션 개발을 용이하게 한다. 이 프레임워크는 개발자가 애플리케이션을 
신속하게 구축하고 외부 통합을 효율적으로 관리할 수 있도록 돕는다.  
  
공식 웹사이트  
https://www.langchain.com/  
  
# **랭체인 주요 패키지**  
랭체인 생태계는 여러 패키지로 구성되어 있으며 각 패키지는 특정한 역할을 수행한다. 개발자는 이러한 패키지들을 조합하여 애플리케이션을 쉽게 개발하고 
배포할 수 있다.  
  
## **렝체인 패키지 설치**  
각 패키지는 pip install <패키지명> 명령으로 쉽게 설치할 수 있다. 주요 랭체인 패키지를 설치하려면 pip install langchain을 실행한다.  
  
## **패키지 관계도**  
패키지 간의 관계는 방향 화살표로 표한할 수 있다.  
  
![img.png](image/img2.png)  
  
위 그림과 같이 화살표는 소스 패키지가 대상 패키지에 종속됨을 나타낸다. 패키지 간 의존성의 몇 가지 예를 살펴보면 다음과 같다.  
  
langchain-core는 랭체인 생태계의 기본이 되는 패키지로 다른 많은 패키지들이 이에 의존한다. langchain을 설치하면 langchain-core가 자동으로 함께 
설치된다. 이는 langchain이 langchain-core에 직접 의존성을 가지고 있기 때문이다.  
  
langgraph는 langchain-core를 선택적으로 사용할 수 있다. 이는 langgraph가 langchain-core를 피어 의존성(peer dependency)으로 취급한다는 
의미다.  
  
패키지를 설치할 때 langchain-core와 같은 필수 종속 패키지를 따로 설치할 필요는 없다. 하지만 특정 버전에서만 지원되는 기능을 사용하려면 필요한 
추가 패키지를 직접 설치해야 할 때가 있다. 이때 설치한 프로그램이 다른 패키지들과 잘 호환되는지 확인해야 한다.  
  
## **랭체인 패키지**  
1. langchain-core  
랭체인의 중심 역할을 하는 패키지로 다양한 기본 기능들이 포함되어 있다. 이 패키지에는 대규모 언어 모델, 데이터 벡터 저장소(Vector Store), 검색기(Retriever)와 
같은 중요한 기능들을 정의하는 기본 구조가 포함되어 있다. 여기서 벡터 저장소한 데이터를 숫자 형태(벡터)로 저장하는 방식이며 데이터 검색기는 필요한 
정보를 찾아주는 시스템이다.  
  
이러한 여러 기능을 체인으로 연결할 수 있도록 langchain-core에서 랭체인 표현 언어(LangChain Expression Language, LCEL)를 제공한다. 핵심 
기능들만 담겨 있어 가볍고 효율적으로 사용할 수 있다.  
  
import langchain_core  
  
2. langchain  
랭체인 패키지는 애플리케이션의 구조를 만드는 체인, 대규모 언어 모델을 사용해 작업을 처리하는 지능형 시스템인 에이전트, 그리고 정보를 검색하는 검색기 전략 
등을 포함한다. 랭체인 패키지는 특정 서비스에 국한되지 않고 다양한 환경에서 재사용할 수 있도록 설계되었다. 이를 통해 복잡한 애플리케이션을 쉽게 만들고 
다양한 작업을 자동화할 수 있다. langchain을 설치하면 langchain-core 패키지가 자동으로 설치된다.  
  
import langchain  
  
3. langchain-community  
langchain-community 패키지는 랭체인 커뮤니티에서 유지 관리하는 다양한 타사 서비스 통합을 포함하고 있다. 이 패키지에는 대규모 언어 모델, 벡터 저장소, 
검색기 등의 통합이 포함되어 있으며 이를 선택적으로 사용할 수 있다. 이 패키지는 가능한 한 가볍게 설계되어 필요한 기능만 추가할 수 있다.  
  
import langchain_community  
  
4. 파트너 패키지  
인기 있는 타사 서비스 통합 지원 패키지로 관계도 그림에서 타사 서비스 통합 부분에 해당한다. 랭체인은 다양한 외부 서비스와 통합할 수 있는데 이 중에서 
자주 사용하는 통합은 별도의 패키지로 분리되었고 각 패키지는 langchain-[partner]로 불러올 수 있다. 예를 들어 오픈AI나 엔트로픽과 같은 통합 지원 
패키지는 각각 langchain-openai, langchain-anthropic 패키지로 제고된다. 각 파트너 패키지는 특정 서비스나 플랫폼과의 통합을 전문적으로 다루며 
이를 통해 더 안정적이고 효율적으로 지원받을 수 있다.  
  
import langchain_openai langchain_anthropic  
  
5. 랭그래프  
![img.png](image/img3.png)  
  
랭그래프(LangGraph)는 그래프 기반 모델링을 도와주는 패키지로 여러 작업을 동시에 처리하거나 특정 조건에 따라 작업을 분기하는 복잡한 애플리케이션을 
설계할 수 있다. 마치 지도를 그리듯이 작업의 흐름을 그래프로 표현해 더 복잡한 기능을 구현할 수 있다. 랭그래프는 고수준의 인터페이스를 제공하여 일반적인 
에이전트를 쉽게 생성할 수 있다.  
  
6. 랭서브  
![img.png](image/img4.png)  
  
랭서브(LangServe)는 REST API 배포를 도와주는 패키지로 이를 활용하면 랭체인의 체인을 REST API로 간편하게 배포할 수 있다. 이를 통해 개발자는 애플리케이션을 
프로덕션 환경에 배포하고 다른 시스템이나 사용자에게 쉽게 제공할 수 있다. 랭서브를 사용하면 프로덕션에 적합한 API를 간단하게 설정하고 운영할 수 있다.  
  
7. 랭스미스  
![img.png](image/img5.png)  
  
랭스미스(LangSmith)는 대규모 언어 모델 애플리케이션을 디버깅, 테스트, 평가, 모니터링할 수 있는 개발자 플랫폼이다. 이를 통해 애플리케이션의 품질을 
높이고 잠재적인 문제를 빠르게 발견하여 수정할 수 있다. 랭스미스는 개발자가 만든 애플리케이션이 안정적이고 신뢰성 있게 작동하는지 확인할 수 있는 
중요한 도구다.  
  
위 그림은 하나의 대규모 언어 모델 애플리케이션에서 사용량과 성능을 모니터링하는 그림이다. 왼쪽 그래프는 애플리케이션의 실행 흐름을 나타내는 추적 횟수
(Trace Count)에 대한 꺽은선 그래프고 오른쪽은 대규모 언어 모델 호출 횟수(LLM Call Count)로 실제로 대규모 언어 모델에 요청을 보낸 횟수를 나타낸다. 
두 지표의 관계를 통해 애플리케이션에서 대규모 언어 모델의 사용 효율성을 파악할 수 있다. 예를 들어 추적 횟수가 대규모 언어 모델 호출 횟수보다 훨씬 높다면 
많은 처리가 대규모 언어 모델 없이 이루어지고 있음을 의미한다.  
  
랭체인은 이와 같이 다양한 패키지를 제공하여 개발자가 원하는 AI 작업을 효율적으로 수행할 수 있도록 지원한다.  
  

